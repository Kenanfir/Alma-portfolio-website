---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import InfoWidgets from "../components/InfoWidgets.astro";
import SkillsWidget from "../components/SkillsWidget.astro";
import ProjectsWidget from "../components/ProjectsWidget.astro";
import ExperienceWidget from "../components/ExperienceWidget.astro";
// import ContactSection from "../components/ContactSection.astro";
import BlogWidgets from "../components/BlogWidgets.astro";
import AchievementsWidget from "../components/AchievementsWidget.astro";
import TestimonialsWidget from "../components/TestimonialsWidget.astro";
---

<Layout title="Alma Alviana - Product Specialist & iOS Developer">
  <main class="relative">
    <Hero />

    <section class="py-20 px-4 relative">
      <!-- Additional floating elements for depth -->
      <div
        class="absolute top-20 left-10 w-32 h-32 bg-gradient-to-r from-blue-400/10 to-purple-400/10 rounded-full blur-2xl animate-pulse"
      >
      </div>
      <div
        class="absolute bottom-20 right-10 w-40 h-40 bg-gradient-to-r from-pink-400/10 to-rose-400/10 rounded-full blur-2xl animate-pulse"
        style="animation-delay: 3s;"
      >
      </div>

      <div class="container mx-auto max-w-6xl relative z-10">
        <div class="mb-12">
          <InfoWidgets />
        </div>
        <div class="space-y-12 mb-12">
          <AchievementsWidget />
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <SkillsWidget />
          <ProjectsWidget />
        </div>
        <div class="space-y-12 mb-12">
          <ExperienceWidget />
        </div>
        <div class="space-y-12 mb-12">
          <BlogWidgets />
        </div>
        <div class="space-y-12 mb-12">
          <TestimonialsWidget />
        </div>
        <!-- <div class="space-y-12 mb-12">
          <ContactSection />
        </div> -->
      </div>
    </section>
  </main>
</Layout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Wait for DOM to be ready
  document.addEventListener("DOMContentLoaded", () => {
    // Set initial state for all animated elements
    gsap.set(
      ".bg-white\\/80, .bg-gradient-to-r, .bg-gradient-to-br, section > div > div",
      {
        opacity: 0,
        y: 30,
      },
    );

    // Single, optimized animation for all widgets and sections
    gsap.utils
      .toArray(
        ".bg-white\\/80, .bg-gradient-to-r, .bg-gradient-to-br, section > div > div",
      )
      .forEach((element: any) => {
        gsap.to(element, {
          opacity: 1,
          y: 0,
          duration: 0.8,
          ease: "power2.out",
          scrollTrigger: {
            trigger: element,
            start: "top bottom-=100",
            end: "bottom top+=50",
            toggleActions: "play none none reverse",
            once: true, // Only animate once
          },
        });
      });
  });
</script>
